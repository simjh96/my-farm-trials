"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4787],{4787:(ne,$,a)=>{a.r($),a.d($,{ReviewWritePageModule:()=>q});var v=a(9808),M=a(4182),l=a(6926),w=a(8242),A=a(655),Y=a(7423),Z=(()=>{return(i=Z||(Z={})).Documents="DOCUMENTS",i.Data="DATA",i.Library="LIBRARY",i.Cache="CACHE",i.External="EXTERNAL",i.ExternalStorage="EXTERNAL_STORAGE",Z;var i})();const U=(0,Y.fo)("Filesystem",{web:()=>a.e(6364).then(a.bind(a,6364)).then(i=>new i.FilesystemWeb)});var J=a(76);const B=(0,Y.fo)("Camera",{web:()=>a.e(3954).then(a.bind(a,3954)).then(i=>new i.CameraWeb)});var j=a(537),e=a(9863),oe=a(520),Q=a(9387);let re=(()=>{class i{constructor(){this.keywords={type01:[["\ub2ec\uc544\uc694","star-outline"],["\uc0c1\ud07c\ud574\uc694","star-half-outline"],["\uc798 \uc775\uc5c8\uc5b4\uc694","snow-outline"],["\uc0c8\ucf64\ud574\uc694","share-outline"],["\uc2e0\uc120\ud574\uc694","search-circle-outline"],["\uc54c\ucc28\uc694","stats-chart-outline"]],type02:[["\uac00\uaca9\uc774 \uc801\ub2f9\ud574\uc694","shirt-outline"],["\ud3ec\uc7a5\uc774 \uaf3c\uaf3c\ud574\uc694","shapes-outline"],["\ud310\ub9e4\uc790\uac00 \uce5c\uc808\ud574\uc694","pizza-outline"]],type03:[["\ub610 \uba39\uace0 \uc2f6\uc5b4\uc694","people-circle-outline"],["\ub610 \uc0c0\uc5b4\uc694","paw-outline"],["\uc544\uc774\uac00 \uc88b\uc544\ud574\uc694","person-circle-outline"],["\uc120\ubb3c\ud588\uc5b4\uc694","notifications-outline"]]}}getReviewKeywords(t){return this.keywords[t]}getAllReviewKeywords(){const t={};return Object.assign(t,this.keywords),t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var s=a(4692),n=a(2549);function o(i,m){if(1&i&&(e.TgZ(0,"ion-slide")(1,"ion-grid"),e._UZ(2,"ion-icon",5),e.TgZ(3,"ion-label",6),e._uU(4),e.qZA(),e._UZ(5,"ion-icon",7),e.qZA()()),2&i){const t=m.$implicit;e.Akn("width: "+(12*t[0].length+55)+"px;"),e.xp6(2),e.Q6J("name",t[1]),e.xp6(2),e.Oqu(t[0])}}const d=function(){return{slidesPerView:"auto",zoom:!1,grabCursor:!0}};function C(i,m){if(1&i&&(e.TgZ(0,"ion-slides",3),e.YNc(1,o,6,4,"ion-slide",4),e.qZA()),2&i){const t=m.$implicit,r=e.oxw();e.Q6J("options",e.DdM(2,d)),e.xp6(1),e.Q6J("ngForOf",r.reviewKeywords[t])}}let y=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-chip-sliders"]],inputs:{keys:"keys",reviewKeywords:"reviewKeywords"},decls:4,vars:1,consts:[[1,"keyword-chip-select","ion-margin-horizontal","green"],[1,"text-size-xs","font-regular","text-color-secondary","ion-no-margin"],[3,"options",4,"ngFor","ngForOf"],[3,"options"],[3,"style",4,"ngFor","ngForOf"],[1,"icon-color-accent",3,"name"],[1,"text-size-sm"],["name","close-circle"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2," \ud0a4\uc6cc\ub4dc \ubaa8\uc74c\uc9d1 "),e.qZA(),e.YNc(3,C,2,3,"ion-slides",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",r.keys))},directives:[v.sg,l.Hr,l.A$,l.jY,l.gu,l.Q$],styles:[".keyword-chip-select[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{height:25px;border-radius:15px;margin:2px;color:#3d3c3cb0;border:1px solid rgba(61,60,60,.692)}.keyword-chip-select[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;justify-content:space-between}"]}),i})();var T=a(241);function c(i,m){1&i&&(e.TgZ(0,"h3",18),e._uU(1," \uc0ac\uc9c4\uc744 \ub4f1\ub85d\ud558\uc138\uc694! "),e.qZA())}function I(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"ion-grid")(1,"ion-thumbnail"),e._UZ(2,"ion-img",19),e.qZA(),e.TgZ(3,"ion-label",20),e._uU(4),e.ALo(5,"slice"),e.qZA(),e.TgZ(6,"ion-button",21),e.NdJ("click",function(){const P=e.CHM(t).$implicit;return e.oxw().deleteImage(P)}),e._UZ(7,"ion-icon",22),e.qZA()()}if(2&i){const t=m.$implicit;e.xp6(2),e.Q6J("src",t.data),e.xp6(2),e.hij(" ",t.path.length>10?"..."+e.Dn7(5,2,t.path,-10,t.path.length):t.path," ")}}const u="stored-images",G=[{path:"",component:(()=>{class i{constructor(t,r,g,P,K,f,p,L){this.plt=t,this.http=r,this.loadingCtrl=g,this.toastCtrl=P,this.itemDetailService=K,this.route=f,this.reviewKeywordService=p,this.navController=L,this.images=[],this.convertBlobToBase64=_=>new Promise((D,x)=>{const k=new FileReader;k.onerror=x,k.onload=()=>{D(k.result)},k.readAsDataURL(_)}),this.itemId=+this.route.snapshot.paramMap.get("itemId"),this.ithItemDetail=K.getItemDetail(this.itemId),this.reviewKeywords=p.getAllReviewKeywords(),this.keys=Object.keys(this.reviewKeywords)}ngOnInit(){return(0,A.mG)(this,void 0,void 0,function*(){this.loadFiles()})}onFollow(t){console.log("clicked following: ",t),t.btFollowing="\uad6c\ub3c5\ud558\uae30"==t.btFollowing?"\uad6c\ub3c5\uc911":"\uad6c\ub3c5\ud558\uae30"}openPage(t){this.navController.navigateForward(t,{})}loadFiles(){return(0,A.mG)(this,void 0,void 0,function*(){this.images=[];const t=yield this.loadingCtrl.create({message:"\uc0ac\uc9c4\uc744 \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."});yield t.present(),U.readdir({path:u,directory:Z.Data}).then(r=>{this.loadFileData(r.files)},r=>(0,A.mG)(this,void 0,void 0,function*(){yield U.mkdir({path:u,directory:Z.Data})})).then(r=>{t.dismiss()})})}loadFileData(t){return(0,A.mG)(this,void 0,void 0,function*(){for(let r of t){const g=`${u}/${r}`,P=yield U.readFile({path:g,directory:Z.Data});this.images.push({name:r,path:g,data:`data:image/jpeg;base64,${P.data}`})}})}presentToast(t){return(0,A.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t,duration:3e3})).present()})}selectImage(){return(0,A.mG)(this,void 0,void 0,function*(){const t=yield B.getPhoto({quality:90,allowEditing:!1,resultType:J.dk.Uri,source:J.oK.Photos});t&&this.saveImage(t)})}saveImage(t){return(0,A.mG)(this,void 0,void 0,function*(){const r=yield this.readAsBase64(t),g=(new Date).getTime()+".jpeg";yield U.writeFile({path:`${u}/${g}`,data:r,directory:Z.Data}),this.loadFiles()})}startUpload(t){return(0,A.mG)(this,void 0,void 0,function*(){const g=yield(yield fetch(t.data)).blob(),P=new FormData;P.append("file",g,t.name),this.uploadData(P)})}uploadData(t){return(0,A.mG)(this,void 0,void 0,function*(){const r=yield this.loadingCtrl.create({message:"Uploading image..."});yield r.present(),this.http.post("http://localhost:8888/",t).pipe((0,j.x)(()=>{r.dismiss()})).subscribe(P=>{this.presentToast(P.success?"\ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc \ud588\uc2b5\ub2c8\ub2e4!":"\ud30c\uc77c \uc5c5\ub85c\ub4dc\ub97c \uc2e4\ud328 \ud588\uc2b5\ub2c8\ub2e4!")})})}deleteImage(t){return(0,A.mG)(this,void 0,void 0,function*(){yield U.deleteFile({directory:Z.Data,path:t.path}),this.loadFiles(),this.presentToast("\ud30c\uc77c\uc744 \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4!")})}readAsBase64(t){return(0,A.mG)(this,void 0,void 0,function*(){if(this.plt.is("hybrid"))return(yield U.readFile({path:t.path})).data;{const g=yield(yield fetch(t.webPath)).blob();return yield this.convertBlobToBase64(g)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.t4),e.Y36(oe.eN),e.Y36(l.HT),e.Y36(l.yF),e.Y36(Q.X),e.Y36(w.gz),e.Y36(re),e.Y36(l.SH))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-review-write"]],decls:27,vars:7,consts:[["scrollEvents","true",1,"green",3,"fullscreen","appHideHeader"],[1,"green"],["header",""],["slot","start"],["defaultHref","/","text",""],[1,"ion-text-capitalize"],[1,"my-margin"],["scrollEvents","true",3,"ithItemDetail","onItemClick","onFollow"],["scrollEvents","true",3,"keys","reviewKeywords"],[1,"text-write","green"],["rows","6","cols","20","placeholder","\ud0a4\uc6cc\ub4dc\ub97c \uc774\uc6a9\ud574 \ub0b4\uc6a9 \uc791\uc131 \uae30\ub2a5 \uad6c\ud604 \ud544\uc694...",1,"border"],["color","success","expand","full",1,"submit"],[1,"photo-upload","ion-margin"],["class","ion-padding ion-text-center",4,"ngIf"],[3,"click"],[1,"tex-size-sm"],["name","camera",1,"green","text-size-lg"],[4,"ngFor","ngForOf"],[1,"ion-padding","ion-text-center"],[3,"src"],[1,"ion-text-wrap"],["fill","clear",3,"click"],["slot","icon-only","name","trash"]],template:function(t,r){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-header",1,2)(3,"ion-toolbar")(4,"ion-buttons",3),e._UZ(5,"ion-back-button",4),e.qZA(),e.TgZ(6,"ion-title",5),e._uU(7,"\ub9ac\ubdf0 \uc791\uc131"),e.qZA()()(),e._UZ(8,"ion-grid",6),e.TgZ(9,"app-item-detail",7),e.NdJ("onItemClick",function(P){return r.openPage("neighbor-farm-detail/"+P.id)})("onFollow",function(P){return r.onFollow(P)}),e.qZA(),e._UZ(10,"ion-grid",6)(11,"app-chip-sliders",8)(12,"ion-grid",6),e.TgZ(13,"ion-grid",9),e._UZ(14,"ion-textarea",10),e.TgZ(15,"ion-button",11),e._uU(16,"\ub9ac\ubdf0\uc644\ub8cc"),e.qZA()(),e._UZ(17,"ion-grid",6),e.TgZ(18,"div",12),e.YNc(19,c,2,0,"h3",13),e.TgZ(20,"ion-grid")(21,"ion-thumbnail",14),e.NdJ("click",function(){return r.selectImage()}),e.TgZ(22,"p",15),e._uU(23,"\uc0ac\uc9c4 \ucd94\uac00"),e.qZA(),e._UZ(24,"ion-icon",16),e.qZA()(),e.YNc(25,I,8,6,"ion-grid",17),e.qZA(),e._UZ(26,"app-footer"),e.qZA()),2&t){const g=e.MAs(2);e.Q6J("fullscreen",!0)("appHideHeader",g),e.xp6(9),e.Q6J("ithItemDetail",r.ithItemDetail),e.xp6(2),e.Q6J("keys",r.keys)("reviewKeywords",r.reviewKeywords),e.xp6(8),e.Q6J("ngIf",0===r.images.length),e.xp6(6),e.Q6J("ngForOf",r.images)}},directives:[l.W2,s.V,l.Gu,l.sr,l.Sm,l.oU,l.cs,l.wd,l.jY,n.g,y,l.g2,l.j9,l.YG,v.O5,l.Bs,l.gu,v.sg,l.Xz,l.Q$,T.c],pipes:[v.OU],styles:["ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{border-bottom:1px solid var(--dv-background-border)}.my-margin[_ngcontent-%COMP%]{margin:5px 0}.text-write[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(131,115,115,.351)}.photo-upload[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow:scroll;padding:0 20px}.photo-upload[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{position:relative;border:.1px solid rgba(61,60,60,.392);background-color:#3d3c3c17;border-radius:2px;display:flex;align-items:center;justify-content:center}.photo-upload[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:flex;width:100px;overflow:auto}.photo-upload[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{position:relative}.photo-upload[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;bottom:-5px;left:70px}"]}),i})()}];let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[w.Bz.forChild(G)],w.Bz]}),i})();var X=a(6102),V=a(9258);let q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[v.ez,M.u5,l.Pc,N,X.U,V.K]]}),i})()},76:(ne,$,a)=>{a.d($,{oK:()=>v,GW:()=>M,dk:()=>l});var v=(()=>{return(w=v||(v={})).Prompt="PROMPT",w.Camera="CAMERA",w.Photos="PHOTOS",v;var w})(),M=(()=>{return(w=M||(M={})).Rear="REAR",w.Front="FRONT",M;var w})(),l=(()=>{return(w=l||(l={})).Uri="uri",w.Base64="base64",w.DataUrl="dataUrl",l;var w})()},7423:(ne,$,a)=>{a.d($,{xz:()=>H,Uw:()=>Q,fo:()=>j});var v=a(5861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var O=(()=>{return(s=O||(O={})).Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE",O;var s})();class H extends Error{constructor(n,o){super(n),this.message=n,this.code=o}}const U=s=>{var n,o,d,C,y;const T=s.CapacitorCustomPlatform||null,c=s.Capacitor||{},I=c.Plugins=c.Plugins||{},u=s.CapacitorPlatforms,G=(null===(n=null==u?void 0:u.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>null!==T?T.name:(s=>{var n,o;return(null==s?void 0:s.androidBridge)?"android":(null===(o=null===(n=null==s?void 0:s.webkit)||void 0===n?void 0:n.messageHandlers)||void 0===o?void 0:o.bridge)?"ios":"web"})(s)),X=(null===(o=null==u?void 0:u.currentPlatform)||void 0===o?void 0:o.isNativePlatform)||(()=>"web"!==G()),q=(null===(d=null==u?void 0:u.currentPlatform)||void 0===d?void 0:d.isPluginAvailable)||(f=>{const p=g.get(f);return!(!(null==p?void 0:p.platforms.has(G()))&&!m(f))}),m=(null===(C=null==u?void 0:u.currentPlatform)||void 0===C?void 0:C.getPluginHeader)||(f=>{var p;return null===(p=c.PluginHeaders)||void 0===p?void 0:p.find(L=>L.name===f)}),g=new Map,K=(null===(y=null==u?void 0:u.currentPlatform)||void 0===y?void 0:y.registerPlugin)||((f,p={})=>{const L=g.get(f);if(L)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),L.proxy;const _=G(),D=m(f);let x;const k=function(){var h=(0,v.Z)(function*(){return!x&&_ in p?x=x="function"==typeof p[_]?yield p[_]():p[_]:null!==T&&!x&&"web"in p&&(x=x="function"==typeof p.web?yield p.web():p.web),x});return function(){return h.apply(this,arguments)}}(),ee=h=>{let b;const E=(...R)=>{const W=k().then(F=>{const S=((h,b)=>{var E,R;if(!D){if(h)return null===(R=h[b])||void 0===R?void 0:R.bind(h);throw new H(`"${f}" plugin is not implemented on ${_}`,O.Unimplemented)}{const W=null==D?void 0:D.methods.find(F=>b===F.name);if(W)return"promise"===W.rtype?F=>c.nativePromise(f,b.toString(),F):(F,S)=>c.nativeCallback(f,b.toString(),F,S);if(h)return null===(E=h[b])||void 0===E?void 0:E.bind(h)}})(F,h);if(S){const z=S(...R);return b=null==z?void 0:z.remove,z}throw new H(`"${f}.${h}()" is not implemented on ${_}`,O.Unimplemented)});return"addListener"===h&&(W.remove=(0,v.Z)(function*(){return b()})),W};return E.toString=()=>`${h.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:h,writable:!1,configurable:!1}),E},le=ee("addListener"),ae=ee("removeListener"),ce=(h,b)=>{const E=le({eventName:h},b),R=function(){var F=(0,v.Z)(function*(){const S=yield E;ae({eventName:h,callbackId:S},b)});return function(){return F.apply(this,arguments)}}(),W=new Promise(F=>E.then(()=>F({remove:R})));return W.remove=(0,v.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield R()}),W},te=new Proxy({},{get(h,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return D?ce:le;case"removeListener":return ae;default:return ee(b)}}});return I[f]=te,g.set(f,{name:f,proxy:te,platforms:new Set([...Object.keys(p),...D?[_]:[]])}),te});return c.convertFileSrc||(c.convertFileSrc=f=>f),c.getPlatform=G,c.handleError=f=>s.console.error(f),c.isNativePlatform=X,c.isPluginAvailable=q,c.pluginMethodNoop=(f,p,L)=>Promise.reject(`${L} does not have an implementation of "${p}".`),c.registerPlugin=K,c.Exception=H,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},B=(s=>s.Capacitor=U(s))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),j=B.registerPlugin;class Q{constructor(n){this.listeners={},this.windowListeners={},n&&(console.warn(`Capacitor WebPlugin "${n.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=n)}addListener(n,o){var d=this;this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(o);const y=this.windowListeners[n];y&&!y.registered&&this.addWindowListener(y);const T=function(){var I=(0,v.Z)(function*(){return d.removeListener(n,o)});return function(){return I.apply(this,arguments)}}(),c=Promise.resolve({remove:T});return Object.defineProperty(c,"remove",{value:(I=(0,v.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield T()}),function(){return I.apply(this,arguments)})}),c;var I}removeAllListeners(){var n=this;return(0,v.Z)(function*(){n.listeners={};for(const o in n.windowListeners)n.removeWindowListener(n.windowListeners[o]);n.windowListeners={}})()}notifyListeners(n,o){const d=this.listeners[n];d&&d.forEach(C=>C(o))}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,o){this.windowListeners[o]={registered:!1,windowEventName:n,pluginEventName:o,handler:d=>{this.notifyListeners(o,d)}}}unimplemented(n="not implemented"){return new B.Exception(n,O.Unimplemented)}unavailable(n="not available"){return new B.Exception(n,O.Unavailable)}removeListener(n,o){var d=this;return(0,v.Z)(function*(){const C=d.listeners[n];if(!C)return;const y=C.indexOf(o);d.listeners[n].splice(y,1),d.listeners[n].length||d.removeWindowListener(d.windowListeners[n])})()}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){!n||(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}}}}]);